self.addEventListener("push",(i=>{console.log("Push event received:",i);let t={};if(i.data)try{t=i.data.json()}catch(o){t={title:"AgentAPI Notification",body:i.data.text()}}const o={title:t.title||"AgentAPI Notification",body:t.body||"You have a new notification",icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:"agentapi-notification",data:t,actions:[{action:"view",title:"View",icon:"/icon-192x192.png"},{action:"dismiss",title:"Dismiss"}]};i.waitUntil(self.registration.showNotification(t.title||"AgentAPI Notification",o))})),self.addEventListener("notificationclick",(i=>{console.log("Notification click received:",i),i.notification.close(),"dismiss"!==i.action&&i.waitUntil(clients.openWindow("/"))})),self.addEventListener("notificationclose",(i=>{console.log("Notification closed:",i)}));